<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Find Me – SPA Básica</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>

<h1>Find Me</h1>

<nav>
    <button id="btnNavAvistador">Registrarme</button>
    <button id="btnNavForm">Registrar desaparecido</button>
    <button id="btnNavList">Ver lista</button>
    <span style="flex:1"></span>
    <button id="btnLogin">Iniciar sesión</button>
    <button id="btnLogout" style="display:none;">Cerrar sesión</button>
</nav>

<div id="sessionStatus" class="muted" style="margin:10px 0;"></div>

<!-- LOGIN (nueva sección, oculta por defecto como las demás) -->
<section id="loginSection" class="">
    <h2>Iniciar Sesión</h2>
    <div id="loginMessage" class="muted"></div>

    <form id="formLogin" novalidate>
        <input
                type="text"
                id="login_dni"
                placeholder="DNI (7 a 10 dígitos)"
                pattern="[0-9]{7,10}"
                inputmode="numeric"
                maxlength="10"
                required
        />
        <input
                type="email"
                id="login_email"
                placeholder="Email registrado"
                required
        />
        <button type="submit" id="btnLoginSubmit">Iniciar Sesión</button>
    </form>

    <div id="loginResult" class="muted"></div>

    <div class="divider">— o —</div>

    <button type="button" id="btnGoRegister" class="btn-secondary">
        No tengo cuenta, quiero registrarme
    </button>
</section>

<!-- AVISTADOR -->
<section id="avistadorSection" class="">
    <h2>Crear mi cuenta (Avistador)</h2>
    <form id="formAvistador" novalidate>
        <div class="row">
            <input type="text" id="a_nombre" placeholder="Nombre" required />
            <input type="text" id="a_apellido" placeholder="Apellido" required />
        </div>
        <div class="row">
            <input type="text" id="a_dni" placeholder="DNI (7 a 10 dígitos)" pattern="[0-9]{7,10}" inputmode="numeric" maxlength="10" required />
            <input type="number" id="a_edad" placeholder="Edad" min="0" required />
        </div>
        <input type="text" id="a_direccion" placeholder="Dirección" required />
        <div class="row">
            <!-- Hacemos email requerido para que luego pueda loguear -->
            <input type="email" id="a_email" placeholder="Email (importante para login)" required />
            <input type="tel" id="a_telefono" placeholder="Teléfono (opcional)" />
        </div>
        <button type="submit" id="btnAvistador">Registrarme</button>
    </form>
    <div id="outAvistador" class="muted"></div>
</section>

<!-- FORMULARIO DESAPARECIDO -->
<section id="formSection" class="active">
    <h2>Registrar Persona Desaparecida</h2>
    <form id="formDesaparecido" novalidate>
        <div class="row">
            <input type="text" id="nombre" placeholder="Nombre" required />
            <input type="text" id="apellido" placeholder="Apellido" required />
        </div>
        <div class="row">
            <input type="number" id="edad" placeholder="Edad" min="0" required />
            <input type="text" id="dni" placeholder="DNI (7 a 10 dígitos)" pattern="[0-9]{7,10}" inputmode="numeric" maxlength="10" required/>
        </div>
        <textarea id="descripcion" placeholder="Descripción" required></textarea>
        <input type="url" id="fotoUrl" placeholder="URL de la Foto (opcional)" />
        <button type="submit" id="btnSubmit">Enviar</button>
    </form>
    <div id="resultado" class="muted"></div>
</section>

<!-- LISTADO -->
<section id="listSection">
    <h2>Lista de Desaparecidos</h2>
    <button id="btnReload">↻ Recargar lista</button>
    <div id="listaEstado" class="muted"></div>
    <table>
        <thead>
        <tr>
            <th>Nombre</th><th>Apellido</th><th>DNI</th>
            <th>Descripción</th><th>Foto</th><th>Fecha</th>
        </tr>
        </thead>
        <tbody id="tablaDesaparecidosBody"></tbody>
    </table>
</section>

<script src="app-auth.js" defer></script>
</body>
</html>
